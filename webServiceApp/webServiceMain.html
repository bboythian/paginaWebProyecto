<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reportes</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/default.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

    <!-- Carga de scripts en el orden correcto -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav" style="background-color: #002856;">
        <div class="container" style=" font-family:FFMetaBold; ">
            <!-- <a class="navbar-brand" href="#page-top"><img src="assets/img/icono.png" alt="..." /></a> -->
            <h1 class="masthead-heading mb-0 mx-4" style="color: white;  font-family: FFMetaBold; ">UCUENCA</h1>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                    <li class="nav-item"><a class="nav-link" href="#main">Regresar</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container">
        <h2 class="text-center mt-5 pt-5">Reportes Ciberadiccion</h2>
        <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab"
                    aria-controls="nav-home" aria-selected="true">Reportes</a>
                <a class="nav-item nav-link" id="nav-userRegister-tab" data-toggle="tab" href="#nav-userRegister" role="tab"
                    aria-controls="nav-userRegister" aria-selected="true">Usuarios registrados</a>
                <a class="nav-item nav-link" id="nav-home-tab" data-toggle="tab" href="#nav-userProfile" role="tab"
                    aria-controls="nav-userProfile" aria-selected="true">Perfil de Usuario</a>
                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab"
                    aria-controls="nav-profile" aria-selected="false">Graficos</a>
                <a class="nav-item nav-link" id="nav-contact-tab" data-toggle="tab" href="#nav-contact" role="tab"
                    aria-controls="nav-contact" aria-selected="false">Estadisticas</a>
            </div>
        </nav>

        <div class="tab-content" id="nav-tabContent">
            <!-- Estructura HTML para la tabla y los controles de paginación -->
            <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                <div class="row">
                    <div class="col-6 dropdown d-flex justify-content-start py-2">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="reporteDropdown" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            Reporte general
                        </button>
                        <div class="dropdown-menu" aria-labelledby="reporteDropdown">
                            <a class="dropdown-item" href="#" data-report-type="general">Reporte general</a>
                            <a class="dropdown-item" href="#" data-report-type="diario">Reporte diario</a>
                            <a class="dropdown-item" href="#" data-report-type="semanal">Reporte semanal</a>
                            <a class="dropdown-item" href="#" data-report-type="mensual">Reporte por mes</a>
                        </div>
                    </div>
                    <div class="col-6 dropdown d-flex justify-content-start py-2">
                        <input type="text" id="search-input" placeholder="Ingrese correo" class="form-control">
                    </div>
                </div>
                <div class="table-container">
                    <table class="table table-striped table-custom">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>Fecha</th>
                                <th>ConsumoMax(H)</th>
                                <th>App 1</th>
                                <th>T1</th>
                                <th>App 2</th>
                                <th>T2</th>
                                <th>App 3</th>
                                <th>T3</th>
                                <th>App 4</th>
                                <th>T4</th>
                                <th>App 5</th>
                                <th>T5</th>
                                <th>Edición</th>
                            </tr>
                        </thead>
                        <tbody id="data-table-body">
                            <!-- Los datos se agregarán aquí dinámicamente -->
                        </tbody>
                    </table>
                    
                </div>
                <button id="prev-page" class="btn btn-outline-secondary">Anterior</button>
                    <span id="page-info"></span>
                    <button id="next-page" class="btn btn-outline-secondary">Siguiente</button>
                <div id="pagination-info" class="pagination-container">
                    
                </div>
            </div>

            <!-- tabla usuarios registrados -->
            <div class="tab-pane fade" id="nav-userRegister" role="tabpanel" aria-labelledby="nav-userRegister-tab">
                <div class="row mx-0">
                    <div class=" p-2 my-3 col-9" style="background-color: rgba(108, 117, 125, 0.25);">Usuarios registrados en el proyecto</div>
                    <input type="text" id="search-input-userR" placeholder="Buscar por cédula"
                        class="form-control my-3 col-3">
                </div>
                <div class="table-container">
                    <table class="table table-striped table-custom">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>Cédula</th>
                                <th>Edad</th>
                                <th>Género</th>
                                <th>SO</th>
                                <th>Movilidad</th>
                                <th>Tiempo diario para realizar tareas</th>
                                <th>Edición</th>
                            </tr>
                        </thead>
                        <tbody id="data-table-body_userRegister">
                            <!-- Los datos se agregarán aquí dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- tabla perfil de usuario -->
            <div class="tab-pane fade" id="nav-userProfile" role="tabpanel" aria-labelledby="nav-contact-tab">
                <div class="row mx-0">
                    <div class=" p-2 my-3 col-9" style="background-color: rgba(108, 117, 125, 0.25);">Perfiles de
                        usuario</div>
                    <input type="text" id="search-input-userP" placeholder="Buscar por cédula"
                        class="form-control my-3 col-3">
                </div>
                <div class="table-container">
                    <table class="table table-striped table-custom">
                        <thead>
                            <tr>
                                <th>Email</th>
                                <th>Periodo</th>
                                <th>Edad</th>
                                <th>Género</th>
                                <th>Lugar residencia</th>
                                <th>Tiene mascota</th>
                                <th>Como vive</th>
                                <th>Responsabilidades en Casa</th>
                                <th>Gestión de tiempo de estudio</th>
                                <th>Tareas Universitarias</th>
                                <th>Actividades al Aire Libre</th>
                                <th>Actividades en Casa</th>
                                <th>Espacio Ordenado</th>
                                <th>Motivacion</th>
                                <th>Edición</th>
                            </tr>
                        </thead>
                        <tbody id="data-table-body_userP">
                            <!-- Los datos se agregarán aquí dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- graficos pastel , barras -->
            <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                <div class="row">
                    <div class="containerGrafico col-md-7 my-3">
                        <div class=" p-2" style="background-color: rgba(108, 117, 125, 0.25);">Aplicaciones más utilizadas en el dia
                        </div>
                        <canvas id="barChart"></canvas>
                    </div>
                    <div class="col-md-4 my-3">
                        <div class="p-2" style="background-color: rgba(108, 117, 125, 0.25);">Aplicaciones más utilizadas en el mes</div>
                        <canvas id="pieChart" class="mx-4"></canvas>
                    </div>
                </div>
            </div>
            <!-- estadisticas graficas -->
            <div class="tab-pane fade" id="nav-contact" role="tabpanel" aria-labelledby="nav-contact-tab">
                <h2 class="mt-4">Gráficos lineales</h2>
                <div class="row">

                    <div class="col-md-6 mt-4 d-none">
                        <h3>Uso de Aplicaciones en el Último Mes</h3>
                        <canvas id="monthlyLineChart"></canvas>
                    </div>
                    <div class="col-md-6 mt-4">
                        <h3>Hora del día de mas consumo</h3>
                        <canvas id="dailyLineChart"></canvas>
                    </div>
                    <div class="col-md-6 mt-4">
                        <h3>Uso de Aplicaciones en la Última Semana</h3>
                        <canvas id="weeklyLineChart"></canvas>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
    <!-- metodos de busqueda avanzada -->
    <!-- <div class="col-6 d-flex justify-content-end">
                        <button class="btn btn-secondary m-2" type="button" data-toggle="collapse" data-target="#filterPanel"
                            aria-expanded="false" aria-controls="filterPanel">
                            Filtros de búsqueda 
                        </button>
                    </div> -->
    <!-- <div class="collapse" id="filterPanel">
                    <div class="row p-2 m-2" style="background-color: rgba(108, 117, 125, 0.25);">
                        <div class="col-6">
                            Búsqueda por correo electrónico:
                            <input type="text" id="search-input" placeholder="Ingrese correo" class="form-control">
                        </div>
                        <div class="col-6">
                            Búsqueda por fecha:
                            <input type="text" id="date-range-picker" class="form-control" placeholder="Seleccionar rango de fechas">
                        </div>
                    </div>
                </div> -->

    <script>
        const data = [{
            "cedula": "78979846546",
            "fecha": "2024-03-06",
            "mayorConsumo": "26",
            "packageName1": "Youtube",
            "tiempoUso1": "58",
            "packageName2": "Miapp",
            "tiempoUso2": "175",
            "packageName3": "Twitter",
            "tiempoUso3": "19",
            "packageName4": "NexusLauncher",
            "tiempoUso4": "17",
            "packageName5": "-",
            "tiempoUso5": "-"
        },
        {
            "cedula": "123456987",
            "fecha": "2024-03-06",
            "mayorConsumo": "26",
            "packageName1": "Miapp",
            "tiempoUso1": "12",
            "packageName2": "NexusLauncher",
            "tiempoUso2": "8",
            "packageName3": "com.android.settings",
            "tiempoUso3": "5",
            "packageName4": "-",
            "tiempoUso4": "-",
            "packageName5": "-",
            "tiempoUso5": "-"
        },
        {
            "cedula": "0105467260",
            "fecha": "2024-03-06",
            "mayorConsumo": "26",
            "packageName1": "Miapp",
            "tiempoUso1": "27",
            "packageName2": "NexusLauncher",
            "tiempoUso2": "12",
            "packageName3": "com.android.settings",
            "tiempoUso3": "5",
            "packageName4": "-",
            "tiempoUso4": "-",
            "packageName5": "-",
            "tiempoUso5": "-"
        },
        {
            "cedula": "0106770761",
            "fecha": "2024-03-26",
            "mayorConsumo": "26",
            "packageName1": "Instagram",
            "tiempoUso1": "26",
            "packageName2": "Miapp",
            "tiempoUso2": "17",
            "packageName3": "NexusLauncher",
            "tiempoUso3": "6",
            "packageName4": "-",
            "tiempoUso4": "-",
            "packageName5": "-",
            "tiempoUso5": "-"
        },
        {
            "cedula": "7894561235",
            "fecha": "2024-04-09",
            "mayorConsumo": "26",
            "packageName1": "NexusLauncher",
            "tiempoUso1": "11",
            "packageName2": "-",
            "tiempoUso2": "-",
            "packageName3": "-",
            "tiempoUso3": "-",
            "packageName4": "-",
            "tiempoUso4": "-",
            "packageName5": "-",
            "tiempoUso5": "-"
        }
        ];

        // Crear gráfico de pastel
        const pieChartCtx = document.getElementById('pieChart').getContext('2d');
        const pieChart = new Chart(pieChartCtx, {
            type: 'pie',
            data: {
                labels: ['Youtube', 'Miapp', 'Twitter', 'NexusLauncher'],
                datasets: [{
                    label: 'Tiempo de Uso',
                    data: [58, 175, 19, 17],
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']
                }]
            },
            options: {
                responsive: true
            }
        });

        // Crear gráfico de barras
        const barChartCtx = document.getElementById('barChart').getContext('2d');
        const barChart = new Chart(barChartCtx, {
            type: 'bar',
            data: {
                labels: data.map(item => item.packageName1),
                datasets: [{
                    label: 'Tiempo de Uso (min)',
                    data: data.map(item => item.tiempoUso1),
                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0']
                }]
            },
            options: {
                indexAxis: 'y', 
                scales: {
                    xAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                },
                responsive: true,
                legend: {
                    position: 'right'
                },
                elements: {
                    bar: {
                        borderWidth: 2,
                    }
                },
                title: {
                    display: true,
                    text: 'Uso de Aplicaciones Móviles'
                }
            }
        });
        // Crear gráfico lineal del último mes
        const monthlyLineChartCtx = document.getElementById('monthlyLineChart').getContext('2d');
        const monthlyLineChart = new Chart(monthlyLineChartCtx, {
            type: 'line',
            data: {
                labels: ['Semana 1', 'Semana 2', 'Semana 3', 'Semana 4'],
                datasets: [{
                    label: 'Uso de Youtube',
                    data: [58, 64, 55, 62],
                    borderColor: '#FF6384',
                    fill: false
                },
                {
                    label: 'Uso de Miapp',
                    data: [175, 180, 190, 200],
                    borderColor: '#36A2EB',
                    fill: false
                },
                {
                    label: 'Uso de Twitter',
                    data: [19, 20, 21, 18],
                    borderColor: '#FFCE56',
                    fill: false
                },
                {
                    label: 'Uso de NexusLauncher',
                    data: [17, 16, 18, 17],
                    borderColor: '#4BC0C0',
                    fill: false
                }]
            },
            options: {
                responsive: true
            }
        });

        // Crear gráfico lineal de la última semana
        const weeklyLineChartCtx = document.getElementById('weeklyLineChart').getContext('2d');
        const weeklyLineChart = new Chart(weeklyLineChartCtx, {
            type: 'line',
            data: {
                labels: ['Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado', 'Domingo'],
                datasets: [{
                    label: 'Uso de Youtube',
                    data: [10, 15, 12, 20, 18, 25, 22],
                    borderColor: '#FF6384',
                    fill: false
                },
                {
                    label: 'Uso de Miapp',
                    data: [30, 28, 35, 32, 38, 40, 42],
                    borderColor: '#36A2EB',
                    fill: false
                },
                {
                    label: 'Uso de Twitter',
                    data: [5, 7, 6, 8, 9, 10, 11],
                    borderColor: '#FFCE56',
                    fill: false
                },
                {
                    label: 'Uso de NexusLauncher',
                    data: [4, 5, 6, 4, 5, 6, 7],
                    borderColor: '#4BC0C0',
                    fill: false
                }]
            },
            options: {
                responsive: true
            }
        });

        // Crear gráfico lineal del último día
        const dailyLineChartCtx = document.getElementById('dailyLineChart').getContext('2d');
        const dailyLineChart = new Chart(dailyLineChartCtx, {
            type: 'line',
            data: {
                labels: ['0-1', '1-2', '2-3', '3-4', '4-5', '5-6', '6-7', '7-8', '8-9', '9-10', '10-11', '11-12', '12-13', '13-14', '14-15', '15-16', '16-17', '17-18', '18-19', '19-20', '20-21', '21-22', '22-23', '23-24'],
                datasets: [{
                    label: 'Uso de Youtube',
                    data: [2, 3, 2, 4, 3, 5, 6, 7, 6, 8, 9, 7, 8, 9, 10, 11, 12, 10, 9, 8, 7, 6, 5, 4],
                    borderColor: '#FF6384',
                    fill: false
                },
                {
                    label: 'Uso de Miapp',
                    data: [5, 6, 5, 7, 6, 8, 9, 10, 11, 12, 13, 14, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4],
                    borderColor: '#36A2EB',
                    fill: false
                },
                {
                    label: 'Uso de Twitter',
                    data: [1, 2, 1, 3, 2, 4, 3, 5, 4, 6, 5, 7, 6, 5, 4, 3, 2, 1, 2, 3, 4, 5, 6, 7],
                    borderColor: '#FFCE56',
                    fill: false
                },
                {
                    label: 'Uso de NexusLauncher',
                    data: [1, 1, 1, 2, 2, 2, 3, 3, 3, 4, 4, 4, 5, 5, 5, 6, 6, 6, 7, 7, 7, 8, 8, 8],
                    borderColor: '#4BC0C0',
                    fill: false
                }]
            },
            options: {
                responsive: true
            }
        });


        fetch('/get-reportes')
        .then(response => response.json())
        .then(reportes => {
            const dataTableBody = document.getElementById('data-table-body');
            const searchInput = document.getElementById('search-input');
            const paginationInfo = document.getElementById('pagination-info');
            const pageInfo = document.getElementById('page-info');
            const prevPageBtn = document.getElementById('prev-page');
            const nextPageBtn = document.getElementById('next-page');
    
            const itemsPerPage = 15;
            let currentPage = 1;
            let filteredData = reportes; // Inicialmente mostramos todos los datos
    
            function renderTable(data) {
                dataTableBody.innerHTML = '';
                const startIndex = (currentPage - 1) * itemsPerPage;
                const endIndex = startIndex + itemsPerPage;
                const currentData = data.slice(startIndex, endIndex);
    
                currentData.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.email}</td>
                        <td>${item.fecha}</td>
                        <td>${item.mayorConsumo}</td>
                        <td>${item.packageName1}</td>
                        <td>${item.tiempoUso1}</td>
                        <td>${item.packageName2}</td>
                        <td>${item.tiempoUso2}</td>
                        <td>${item.packageName3}</td>
                        <td>${item.tiempoUso3}</td>
                        <td>${item.packageName4}</td>
                        <td>${item.tiempoUso4}</td>
                        <td>${item.packageName5}</td>
                        <td>${item.tiempoUso5}</td>
                        <td>
                            <form action="/delete-reporte" method="POST">
                                <input type="hidden" name="reporteId" value="${item._id}">
                                <button type="submit">Eliminar</button>
                            </form>
                        </td>`;
                    dataTableBody.appendChild(row);
                });
    
                // Actualizar información de paginación
                const startItem = startIndex + 1;
                const endItem = Math.min(startIndex + itemsPerPage, data.length);
                paginationInfo.textContent = `Mostrando ${startItem} a ${endItem} de ${data.length} registros`;
                pageInfo.textContent = `Página ${currentPage}`;
    
                // Mostrar botones de navegación una vez que se ha renderizado la tabla
                prevPageBtn.style.display = 'inline-block';
                nextPageBtn.style.display = 'inline-block';
            }
    
            function filterData() {
                const searchTerm = searchInput.value.toLowerCase();
                filteredData = reportes.filter(item => {
                    const itemDate = moment(item.fecha).format('YYYY-MM-DD');
                    const today = moment().format('YYYY-MM-DD');
                    switch (currentReportType) {
                        case 'diario':
                            return itemDate === today;
                        case 'semanal':
                            const startOfLastWeek = moment().subtract(1, 'week').startOf('week').format('YYYY-MM-DD');
                            return moment(item.fecha).isBetween(moment(startOfLastWeek), moment(today), null, '[]');
                        case 'mensual':
                            const startOfLastMonth = moment().subtract(1, 'month').format('YYYY-MM-DD');
                            const todayForMonth = moment().format('YYYY-MM-DD');
                            return moment(item.fecha).isBetween(moment(startOfLastMonth), moment(todayForMonth), null, '[]');
                        case 'general':
                        default:
                            return true;
                    }
                });
    
                filteredData = filteredData.filter(item => item.email.toLowerCase().includes(searchTerm));
                currentPage = 1; // Resetear a la primera página al aplicar filtros
                renderTable(filteredData);
            }
    
            $('.dropdown-item').on('click', function () {
                currentReportType = $(this).data('report-type');
                filterData();
                $('#reporteDropdown').html($(this).text());
            });
    
            searchInput.addEventListener('input', filterData);
    
            // Navegación entre páginas
            prevPageBtn.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderTable(filteredData);
                }
            });
    
            nextPageBtn.addEventListener('click', () => {
                const startIndex = (currentPage - 1) * itemsPerPage;
                if (startIndex + itemsPerPage < filteredData.length) {
                    currentPage++;
                    renderTable(filteredData);
                }
            });
    
            // Inicializar la tabla con todos los datos
            renderTable(filteredData);
        })
        .catch(err => {
            console.error('Error al obtener reportes:', err);
        });
    

    // Obtener la lista de preferencias de usuario al cargar la página
    fetch('/get-user-preferences')
        .then(response => response.json())
        .then(userPreferences => {
            const dataTableBodyUserP = document.getElementById('data-table-body_userP');
            const searchInputUserP = document.getElementById('search-input-userP'); // Asumiendo que tienes un input de búsqueda para esta tabla
            let data = userPreferences;

            function renderTable(data) {
                dataTableBodyUserP.innerHTML = '';
                data.forEach(item => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                <td>${item.email}</td>
                <td>${item.periodo}</td>
                <td>${item.edad}</td>
                <td>${item.genero}</td>
                <td>${item.residencia}</td>
                <td>${item.mascota}</td>
                <td>${item.comoVive}</td>
                <td>${item.responsabilidadesEnCasa}</td>
                <td>${item.gestionTiempoEstudio}</td>
                <td>${item.tareasUniversitarias}</td>
                <td>${item.actividadesAireLibre}</td>
                <td>${item.actividadesEnCasa}</td>
                <td>${item.espacioOrdenado}</td>
                <td>${item.motivacion}</td> 
                <td>
                            <form action="/delete-user-preference" method="POST">
                                <input type="hidden" name="userPreferenceId" value="${item._id}">
                                <button type="submit">Eliminar</button>
                            </form>
                        </td>
            `;
                    dataTableBodyUserP.appendChild(row);
                });
            }
            //busqueda por caracter
            function filterData() {
                const searchTerm = searchInputUserP.value.toLowerCase();
                const filteredData = data.filter(item => item.email.toLowerCase().includes(searchTerm));
                renderTable(filteredData);
            }

            searchInputUserP.addEventListener('input', filterData);

            // Inicializar la tabla con todos los datos
            renderTable(data);
        })
        .catch(err => {
            console.error('Error al obtener userPreferences:', err);
        });


        // Obtener la lista de preferencias de usuario al cargar la página
    fetch('/get-user-register')
    .then(response => response.json())
    .then(userRegister => {
        const dataTableBodyUserRegister = document.getElementById('data-table-body_userRegister');
        const searchInputUserR = document.getElementById('search-input-userR'); // Asumiendo que tienes un input de búsqueda para esta tabla
        let data = userRegister;

        function renderTable(data) {
            dataTableBodyUserRegister.innerHTML = '';
            data.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
            <td>${item.email}</td>
            <td>${item.cedula}</td>
            <td>${item.edad}</td>
            <td>${item.genero}</td>
            <td>${item.so}</td>
            <td>${item.movilidad}</td>
            <td>${item.tiempoDiario}</td>
                            <td>
                            <form action="/delete-user-register" method="POST">
                                <input type="hidden" name="userRegisterId" value="${item._id}">
                                <button type="submit">Eliminar</button>
                            </form>
                        </td>
        `;
                dataTableBodyUserRegister.appendChild(row);
            });
        }
        //busqueda por caracter
        function filterData() {
            const searchTerm = searchInputUserR.value.toLowerCase();
            const filteredData = data.filter(item => item.email.toLowerCase().includes(searchTerm));
            renderTable(filteredData);
        }

        searchInputUserR.addEventListener('input', filterData);

        // Inicializar la tabla con todos los datos
        renderTable(data);
    })
    .catch(err => {
        console.error('Error al obtener userRegister:', err);
    });

</script>


</body>

</html>
<!-- dataTableBody.appendChild(row);
// Agregar datos a la colección 'data'
data.push({
packageName1: item.packageName1,
tiempoUso1: item.tiempoUso1,
packageName2: item.packageName2,
tiempoUso2: item.tiempoUso2,
packageName3: item.packageName3,
tiempoUso3: item.tiempoUso3,
packageName4: item.packageName4,
tiempoUso4: item.tiempoUso4,
packageName5: item.packageName5,
tiempoUso5: item.tiempoUso5
}); -->